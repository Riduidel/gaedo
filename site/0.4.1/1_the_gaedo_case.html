<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at Nov 15, 2012
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20121115" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Gaedo - </title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>Gaedo</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2012-11-15</li>
                      
                
                    
                 <li id="projectVersion" class="pull-right">Version: 0.4.1</li>
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">about gaedo</li>
                                
      <li class="active">
    
            <a href="#"><i class="none"></i>the gaedo case</a>
          </li>
                  
      <li>
    
                          <a href="2_gaedo_and_collection_storage.html" title="gaedo and collection storage">
          <i class="none"></i>
        gaedo and collection storage</a>
            </li>
                  
      <li>
    
                          <a href="3_method_missing_vs_invokeLater.html" title="method missing vs invokeLater">
          <i class="none"></i>
        method missing vs invokeLater</a>
            </li>
                  
      <li>
    
                          <a href="4_compilable_queries_a_senseless_concept.html" title="compilable queries a senseless concept">
          <i class="none"></i>
        compilable queries a senseless concept</a>
            </li>
                  
      <li>
    
                          <a href="5_dynamic_finders_the_reference.html" title="dynamic finders the reference">
          <i class="none"></i>
        dynamic finders the reference</a>
            </li>
                  
      <li>
    
                          <a href="6_how_to_include_gaedo_in_my_application.html" title="how to include gaedo in my application">
          <i class="none"></i>
        how to include gaedo in my application</a>
            </li>
                  
      <li>
    
                          <a href="7_graphing_queries.html" title="graphing queries">
          <i class="none"></i>
        graphing queries</a>
            </li>
                  
      <li>
    
                          <a href="8_kudos_to_all_of_you.html" title="kudos to all of you">
          <i class="none"></i>
        kudos to all of you</a>
            </li>
                  
      <li>
    
                          <a href="9_gaedo_bug_in_bouncing_queries.html" title="gaedo bug in bouncing queries">
          <i class="none"></i>
        gaedo bug in bouncing queries</a>
            </li>
                  
      <li>
    
                          <a href="10_gaedo_does_graphs.html" title="gaedo does graphs">
          <i class="none"></i>
        gaedo does graphs</a>
            </li>
                              <li class="nav-header">other infos</li>
                                
      <li>
    
                          <a href="easy_release_with_maven.html" title="easy release with maven">
          <i class="none"></i>
        easy release with maven</a>
            </li>
                  
      <li>
    
                          <a href="gaedo_in_the_wild.html" title="gaedo in the wild">
          <i class="none"></i>
        gaedo in the wild</a>
            </li>
                  
      <li>
    
                          <a href="gaedo_supports_migrations.html" title="gaedo supports migrations">
          <i class="none"></i>
        gaedo supports migrations</a>
            </li>
                  
      <li>
    
                          <a href="guice_integration_is_ready.html" title="guice integration is ready">
          <i class="none"></i>
        guice integration is ready</a>
            </li>
                  
      <li>
    
                          <a href="prevalence_in_gaedo.html" title="prevalence in gaedo">
          <i class="none"></i>
        prevalence in gaedo</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                                                                                                
      <li>
    
                          <a href="project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
                                                                                                                                            
      <li>
    
                          <a href="project-reports.html" title="Project Reports">
          <i class="icon-chevron-right"></i>
        Project Reports</a>
                  </li>
            </ul>
                
                    
                            <form id="search-form" action="http://www.google.com/search" method="get" >
    
  <input value="$sitesearchValue" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript" src="http://www.google.com/coop/cse/brand?form=search-form"></script>
          
          <hr class="divider" />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <p>So, you came on this site and want to know what the heck is gaedo ? As any acronymic name, unfolding it may not be of real interest : Google App Engine Data Objects. Well, pretty obvious, isnt it ? in fact, the point of gaedo is precisely to avoi what some have already advocated as an anti-pattern. I mean, when using a DAO, you start creating your POJOs, to immediatly duplicate them in so-called data access objects, making your code full of copy methods. By using the architecture provided by gaedo, you immediatly get rid of all that fuss. Indeed, for a POJO, using gaedo, you have to define two things </p>
<ul>
  <li>a FinderCrudService interface that will define the available operations</li>
  <li>an Informer subinterface, that will define what fields will be usable for queries (we will go back longer on that second).</li>
</ul><p>As you may have noted from code, the FinderCrudService interface is quite simple </p>
<div class="source"><pre class="prettyprint linenums">/* This is a &quot;compressed&quot; view of the service interface */
public interface FinderCrudService&lt;DataType, InformerType extends Informer&lt;DataType&gt;&gt; extends AbstractCrudService&lt;DataType&gt; {
    /**
     * Create a new object of the given type and returns it
     * 
     * @param toCreate
     *            object to save
     * @return returned object
     */
    public DataType create(DataType toCreate);

    /**
     * Delete an object of the given type
     * 
     * @param toDelete
     *            object to delete
     */
    public void delete(DataType toDelete);

    /**
     * Update an object of the given type
     * 
     * @param toUpdate
     *            object to update
     * @return updated object
     */
    public DataType update(DataType toUpdate);

    /**
     * Creates a finder for the given datatype. This finder is the delegate that
     * will perform the various queries kind
     * 
     * @return
     */
    public Finder&lt;DataType, InformerType&gt; find();

    /**
     * Get class 
     * @return
     */
    public Class&lt;?&gt; getContainedClass();

    /**
     * Get the informer associated to this data type
     * @return an object implementing the interface defined by InformerType.
     */
    public InformerType getInformer();
}
</pre></div><p>In all those methods, only two are useed for internal purpose (the two lasts) and should not interest you. The others are quite more explicit, especially the create, update and delete&gt; ones. </p><p>In fact, the only that is a little more complicated is find, which reclaims a little explanation. Since im a little lazy, the clearest explanation is an obvious example, like one of our tests (<tt>CollectionBackedTagFinderServiceTest</tt>) : </p>
<div class="source"><pre class="prettyprint linenums">    Iterable&lt;Tag&gt; values = tagService.find().matching(
         new QueryBuilder&lt;TagInformer&gt;() {

          public QueryExpression createMatchingExpression(
                 TagInformer object) {
              return object.get(&quot;text&quot;).equalsTo(A);
          }
         }).getAll();
</pre></div><p>One can see that, here, by calling the find method, we create a Finder object. By calling this Finders matching method, we in turn create a QueryStament that has the the getAll method that finally gets called. The most tricky part being the QueryBuilder we use to create a QueryExpression that will in turn be used (internally) by the getAll method. This code is extremely powerful, but rather complicated. And there is one big drawback : the get method is not typesafe : we could call it with any text parameter, it would get called without any problem, and youll have trouble finding what gone wrong. As a consequence, we decided to let you sub-interface Informer, without bothering you with the associated implementation. As a consequence, cosnidering the Tag class used in this example, there is a TagInformer you could write as such </p>
<div class="source"><pre class="prettyprint linenums">public interface TagInformer extends Informer&lt;Tag&gt; {
    public StringFieldInformer getText();
}
</pre></div><p>The StringFieldInformer is a specific class allowing us to write complex predicates based upon String. Youre encouraged to go take a look at its associated documentation. Anyway, using it, previous code could be rewritten as such : </p>
<div class="source"><pre class="prettyprint linenums">    Iterable&lt;Tag&gt; values = tagService.find().matching(
         new QueryBuilder&lt;TagInformer&gt;() {

          public QueryExpression createMatchingExpression(
                 TagInformer object) {
              return object.getText().equalsTo(A);
          }
         }).getAll();
</pre></div><p>Better typing, no ? This typing is important to us, since it allows completion, error highlighting at compile time, and so on. </p><p>but there will be even better ! A service can also use previously mentionned dynamic finders. A dynamic finder interface is an extension to FinderCrudService where tyou only have to declare method (without even implementing them). By using them, previous code could be rewritten as such : </p>
<div class="source"><pre class="prettyprint linenums">    Iterable&lt;Tag&gt; values = tagService.findAllByTextEqualsTo(A);
</pre></div><p>Far better, isnt it ? And all this should work (in a near future) with </p>
<ul>
  <li>GAE</li>
  <li>collections backed by space4j or prevayler</li>
  <li>even Hibernate ! (provided someone has enough courage to do the backend code).</li>
</ul><p>All without any modification in client code (even queries could stay unchanged), excepted annotations sometimes required by backend (GAE, JDO, JPA and Hibernate are great consumers of those).</p>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                    2012
                        <a href="www.dooapp.com">dooApp</a>.
            All Rights Reserved.      
                    
      </div>

        
        
          
    
    
                
    <div id="ohloh" class="pull-right">
      <script type="text/javascript" src="http://www.ohloh.net/p/gaedo/widgets/project_factoids.js"></script>
    </div>
        </div>
    </footer>
  </body>
</html>
